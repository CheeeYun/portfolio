## Rebase vs Merge

兩個都是「把分支合併」，但方式不同

- Rebase

  ### 用途一

  合併多個 commit  
  舉例：commit 兩次還沒推上 remote，用 rebase 合併成一個 commit

  ####

  ```sh
  git log --oneline -5
  ( --oneline 一行一個commit -5 最近5次commit)
  ```

  結果:

  ```sh
  20716b0 (HEAD -> new_branch_1223) 新增筆記1223(2)
  509b075 新增12/24筆記
  b74fa42 (origin/main, main) Merge pull request #2 from CheeeYun/new-branch
  75695ce fix:刪除txt-backup.md
  ada990a feat:新增txt-backup.md
  ```

  **20716b0** 和 **509b075** 是我剛 commit 的，現在我要合併這兩個。提醒：合併前要確認 commit 後程式無修改

  #### rebase 兩個 commit (如果要合併 3 個就寫~3)

  ```sh
  git rebase -i HEAD~2
  ```

  進入到 vim 模式，要保留的維持**pick**其他 -i 改成**squash**並:wq 保存即可
  第一個 commit 一定要是 pick
  squash 上面一定要有 pick 不然會錯誤
  如果錯誤先終止卡住的 rebase

  ```sh
  git rebase --abort
  ```

  然後再一次 git rebase -i HEAD~2

  ### 用途二

  把你的分支接到最新的 main （不會有歷史分支）

  舉例：如果 main 已經從更新了，但我的分支沒有更新，
  我想要把我的分支接到 main 的最新版本

  ```sh
  git fetch origin
  git rebase origin/main
  ```

  如果本地 branch 在 remote 要加上--force
  因為會改動版本 ID

  ```sh
  git push --force origin new_branch
  ```

## 修改 commit message

```sh
git commit --amend -m 'xxxxx'
```
